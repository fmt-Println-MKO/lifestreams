<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd    
	                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd" >
	                    

	
	<!-- Properties -->
	<context:property-placeholder location="classpath:application.properties" />

	<bean id= "requester" class="org.ohmage.models.OhmageUser">
		<constructor-arg value="${ohmage.server}"/>
		<constructor-arg value="${lifestreams.username}"/>
		<constructor-arg value="${lifestreams.password}"/>
	</bean>

   	<bean id="requestees" class="org.springframework.util.StringUtils" factory-method="commaDelimitedListToSet">
       	<constructor-arg value="${ohmage.requestees}"/>
   	</bean>
	
	<bean id="movesSegmentStream" class="org.ohmage.models.OhmageStream">
		<constructor-arg value="org.ohmage.Moves"/>
		<constructor-arg value="segments"/>
		<constructor-arg value="20140224"/>
		<constructor-arg value="20140224"/>
	</bean>	
	
	<bean id="movesCredentialStream" class="org.ohmage.models.OhmageStream">
		<constructor-arg value="org.ohmage.Moves"/>
		<constructor-arg value="oauth"/>
		<constructor-arg value="20140213"/>
		<constructor-arg value="20140213"/>
	</bean>	
	
	<bean id="mobilityStream" class="org.ohmage.models.OhmageStream">  
			<constructor-arg value="edu.ucla.cens.Mobility"/>
			<constructor-arg value="extended"/>
			<constructor-arg value="2012061300"/>
			<constructor-arg value="2012050700"/>   
	</bean> 
	
	<bean id="activitySummaryStream" class="org.ohmage.models.OhmageStream">  
			<constructor-arg value="org.ohmage.lifestreams.activities"/>
			<constructor-arg value="activity_summaries"/>
			<constructor-arg value="201403111"/>
			<constructor-arg value="20140311"/>   
	</bean> 
		<bean id="geodiameterStream" class="org.ohmage.models.OhmageStream">  
			<constructor-arg value="org.ohmage.lifestreams.activities"/>
			<constructor-arg value="geodiameter"/>
			<constructor-arg value="201403111"/>
			<constructor-arg value="20140311"/>   
	</bean>
	<bean id="leaveArriveHomeStream" class="org.ohmage.models.OhmageStream">  
			<constructor-arg value="org.ohmage.lifestreams.activities"/>
			<constructor-arg value="leave_arrive_home_time"/>
			<constructor-arg value="201403111"/>
			<constructor-arg value="20140311"/>   
	</bean>  
	
	<!-- Moves Spout -->
	<bean id="moves-since" class="org.joda.time.DateTime">
		<constructor-arg value="2014-2-13"/>
	</bean>
	<bean id="movesSpout" class="org.ohmage.lifestreams.spouts.MovesSpout">  
			<constructor-arg ref="movesCredentialStream"/>
			<constructor-arg ref="moves-since"/>
	</bean>
	
	<!-- Mobility Spout -->
	<bean id="since" class="org.joda.time.DateTime">
		<constructor-arg value="${since}"/>
	</bean>	
	<bean id="mobilitySpout" class="org.ohmage.lifestreams.spouts.OhmageStreamSpout">  
			<constructor-arg ref="mobilityStream"/>
			<constructor-arg ref="since"/>
			<constructor-arg>
				<value type="java.lang.Class">org.ohmage.lifestreams.models.data.MobilityData</value>
			</constructor-arg>
			<constructor-arg value="true"/>
			<constructor-arg value="wifi_data,mode"/>
	</bean>
	
	<!-- Load and inject component -->
	<context:component-scan base-package="co.nutrino.api.moves" />
	<context:component-scan base-package="com.moves.api" />
</beans>
